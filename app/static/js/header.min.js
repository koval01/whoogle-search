document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("adv-search-toggle"),b=document.getElementById("adv-search-div"),c=document.getElementById("search-bar"),d=document.getElementById("result-country"),e=[37,38,39,40];let f=c.value;d.onchange=()=>{let a=window.location.href;n=a.lastIndexOf("/search"),0<n&&(a=a.substring(0,n)+`/search?q=${c.value}&country=${d.value}`,window.location.href=a)};const g=a=>{b.style.maxHeight=a?"70px":"0px",localStorage.advSearchToggled=a};try{g(JSON.parse(localStorage.advSearchToggled))}catch(a){console.warn("Did not recover advanced search toggle state")}a.onclick=()=>{g(a.checked)},c.addEventListener("keyup",function(a){13===a.keyCode?document.getElementById("search-form").submit():c.value!==f&&!e.includes(a.keyCode)&&(f=c.value,handleUserInput())})});