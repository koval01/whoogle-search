document.addEventListener("DOMContentLoaded",()=>{const c=document.getElementById("adv-search-toggle"),g=document.getElementById("adv-search-div"),b=document.getElementById("search-bar"),d=document.getElementById("result-country"),h=[37,38,39,40];let e=b.value;d.onchange=()=>{let a=window.location.href;n=a.lastIndexOf("/search");0<n&&(a=a.substring(0,n)+`/search?q=${b.value}&country=${d.value}`,window.location.href=a)};const f=a=>{g.style.maxHeight=a?"70px":"0px";localStorage.advSearchToggled=a};
try{f(JSON.parse(localStorage.advSearchToggled))}catch(a){console.warn("Did not recover advanced search toggle state")}c.onclick=()=>{f(c.checked)};b.addEventListener("keyup",function(a){13===a.keyCode?document.getElementById("search-form").submit():b.value===e||h.includes(a.keyCode)||(e=b.value,handleUserInput())})});
